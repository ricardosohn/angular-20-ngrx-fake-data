<app-product-form-modal
  [initial]="selectedEdit()"
  (closed)="onEditModalClosed()"
></app-product-form-modal>

<app-confirm-dialog
  [modalId]="deleteModalId"
  titleKey="removeConfirmTitle"
  messageKey="removeConfirmMessage"
  confirmKey="confirm"
  cancelKey="cancel"
  (confirm)="confirmRemove()"
  (cancel)="cancelRemove()"
></app-confirm-dialog>

<div class="flex items-center justify-between mb-4 gap-3">
  <button type="button" class="btn btn-primary" (click)="openFormModal()">+ {{ 'newProduct' | translate }}</button>
  <input
    type="text"
    class="input w-full max-w-xs"
    [placeholder]="'searchHere' | translate"
    [value]="search()"
    (input)="onSearch($any($event.target).value)"
    aria-label="Search"
  />
</div>

<div class="flex w-full overflow-x-auto">
  <table class="table table-zebra">
    <thead>
      <tr>
        <th>{{ 'image' | translate }}</th>
        <th>{{ 'title' | translate }}</th>
        <th>{{ 'price' | translate }}</th>
        <th>{{ 'actions' | translate }}</th>
      </tr>
    </thead>
    <tbody>
      @for (product of filteredProducts(); track product.id) {
      <tr
        app-product-row
        [product]="product"
        (edit)="edit($event)"
        (remove)="askRemove($event)"
      ></tr>
      }

      @if (filteredProducts().length === 0) {
      <tr >
        <td colspan="4" >
          <span class="text-gray-500">{{ 'noProductsFound' | translate }}</span>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>
